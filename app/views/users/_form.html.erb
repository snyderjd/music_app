<% action = user.persisted? ? user_url(user) : users_url %>
<% method = user.persisted? ? "patch" : "post" %>
<% message = user.persisted? ? "Update User" : "Create User" %>

<form action="<%= action %>" method="POST">
    <%# Hidden inputs for method action and authenticity_token %>
    <input type="hidden" name="_method" value="<%= method %>">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>" >

    <%# Labels and inputs for email and password %>
    <label for="user_email">Email Address</label>
    <input type="text" id="user_email" name="user[email]">
    <br>

    <label for="user_password">Password</label>
    <input type="password" id="user_password" name="user[password]">
    <br>

    <input type="submit" value="<%= message %>">
</form>